---
import Billboard from './Billboard.astro'
import type { ImageDataProps } from './Image.astro'
import Image from './Image.astro'

export interface Props {
  class?: string
  images?: ImageDataProps | Array<ImageDataProps>
  description?: string
}

const {
  class: className,
  images = { src: '/images/catalog-item.png' },
  description = 'Распашные ворота',
  ...rest
} = Astro.props
---

<e-popover
  {...rest}
  class:list={[className, 'calculator-image-info']}
>
  {
    Array.isArray(images) ? (
      <Billboard
        class="calculator-image-info__billboard"
        images={images}
      />
    ) : (
      <Image
        {...images}
        lazy
        lazyBackground
        cover
        class="calculator-image-info__billboard"
      />
    )
  }

  <div
    class="calculator__gaw-info__desc f-d-body-large-regular-16 f-m-footnote-regular-12"
    set:html={description}
  />
</e-popover>

<style is:global>
  .calculator-image-info {
    grid-column: 1/1;
    grid-row: 1/1;

    --group: calculator-info;
    --close-rest-in-group: true;

    display: none;

    transition-property: opacity;
    transition-duration: var(--duration-button);
    transition-timing-function: ease;

    opacity: 0;

    &.triggered {
      display: block;
    }

    &.opened {
      opacity: 1;
    }
  }

  .calculator-image-info__billboard {
    --offset: 2rem;

    width: 100%;
    height: 24rem;

    margin-bottom: 2rem;

    background-color: var(--color-image-background);
    border-radius: var(--border-radius);

    @media (max-width: 768px) {
      --offset: 1.5rem;

      height: 18rem;
      margin-bottom: 1.5rem;
    }

    .billboard__buton {
      --slider-button-size: 2.8rem;

      @media (max-width: 768px) {
        --slider-button-size: 2.4rem;
      }
    }
  }

  .calculator-image-info__desc {
    color: var(--color-grayscale-400);
  }
</style>
