---
import Section, { type Props as SectionProps } from './Section.astro'
import SliderBullets from './SliderBullets.astro'
import SliderButton from './SliderButton.astro'

export interface Props extends SectionProps {
  class?: string
  itemInView?: '3' | '4' | 3 | 4
}

const { class: className, itemInView = 3, ...rest } = Astro.props
---

<Section
  class={`three-card-section ${className || ''}`}
  data-items-in-view={itemInView}
  {...rest}
>
  <e-scroll class="three-card-section__slider bullets">
    <slot />
    <SliderButton
      type={'prev'}
      center
    />
    <SliderButton
      type={'next'}
      center
    />
    <SliderBullets />
  </e-scroll>
</Section>

<style is:global>
  .three-card-section__slider {
    --axis: x;
    --gap: 5rem;
    --overflow: hidden;
    --sectional: true;

    --auto-size: true;

    display: flex;
    gap: var(--gap);

    .three-card-section[data-items-in-view='3'] & {
      --sections-in-view: 3;
    }

    .three-card-section[data-items-in-view='4'] & {
      --sections-in-view: 4;
    }

    @media (max-width: 768px) {
      --overflow: unset;
      --gap: 2rem;

      .three-card-section[data-items-in-view='3'] & {
        --sections-in-view: var(--slider-mobile-sections-in-view);
      }

      .three-card-section[data-items-in-view='4'] & {
        --sections-in-view: 1.6;
      }
    }
  }
</style>
