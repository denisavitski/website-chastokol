---
import { typography } from '@utils/typography'
import Icon from './Icon.astro'

export interface Props {
  class?: string
  type?: 'checkbox' | 'radio'
  name?: string
  value?: string
  font?: string | Array<string>
}

const {
  class: className,
  type = 'radio',
  name = 'Text label',
  value = 'Value',
  font = [typography.desktop['body-large-regular-16']],
  ...rest
} = Astro.props
---

<label
  {...rest}
  class:list={[[font].flat(), className, 'checkbox']}
  data-type={type}
>
  <span class="checkbox__input">
    <input
      class="visually-hidden checkbox__input__real"
      type={type}
      {name}
      {value}
    />
    <span class="checkbox__input__fake">
      <Icon
        class="checkbox__input__fake__icon"
        name={type === 'checkbox' ? 'check' : 'circle'}
      />
    </span>
  </span>

  <span
    class="checkbox__title"
    set:html={name}
  />
</label>

<style is:global>
  .checkbox {
    display: inline-flex;
    gap: 1.5rem;

    cursor: pointer;

    user-select: none;
  }

  .checkbox__input {
    width: 2rem;
    height: 2rem;

    accent-color: var(--color-primary-100);
    border-radius: 50%;

    &:focus {
      outline-color: rgba(48, 125, 50, 0.15);
    }
  }

  .checkbox__input {
    position: relative;
  }

  .checkbox__input__real {
  }

  .checkbox__input__fake {
    width: 2rem;
    height: 2rem;

    display: flex;
    align-items: center;
    justify-content: center;

    border: 0.2rem solid var(--color-primary-100);

    .checkbox[data-type='radio'] & {
      border-radius: 50%;
    }

    .checkbox[data-type='checkbox'] & {
      border-radius: 0.5rem;
    }

    .checkbox[data-type='checkbox'] .checkbox__input__real:checked ~ & {
      background-color: var(--color-primary-100);
    }

    .checkbox__input__real:focus ~ & {
      box-shadow: 0rem 0rem 0rem 0.2rem rgba(48, 124, 50, 0.15);
    }
  }

  .checkbox__input__fake__icon {
    .checkbox[data-type='checkbox'] & {
      width: 75%;
      height: 75%;
    }

    .checkbox[data-type='radio'] & {
      width: 100%;
      height: 100%;
    }

    fill: var(--color-primary-100);

    opacity: 0;

    .checkbox__input__real:checked ~ .checkbox__input__fake & {
      opacity: 1;
    }

    .checkbox[data-type='checkbox']
      .checkbox__input__real:checked
      ~ .checkbox__input__fake
      & {
      fill: var(--color-button-text);
    }
  }

  .checkbox__title {
  }
</style>
